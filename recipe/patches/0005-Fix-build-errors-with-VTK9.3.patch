From 32a66f50a23d9e32ccedcf471943e32b188cb226 Mon Sep 17 00:00:00 2001
From: Ramtin Gharleghi <gharleghi@gmail.com>
Date: Thu, 20 Jun 2024 20:07:42 +1000
Subject: [PATCH] Fix build errors with new VTK

---
 .../vtkvmtkSimplifyVoronoiDiagram.cxx                 |  4 ++--
 vtkVmtk/Contrib/vtkvmtkCellDimensionFilter.cxx        | 11 ++++++++---
 2 files changed, 10 insertions(+), 5 deletions(-)

diff --git a/vtkVmtk/ComputationalGeometry/vtkvmtkSimplifyVoronoiDiagram.cxx b/vtkVmtk/ComputationalGeometry/vtkvmtkSimplifyVoronoiDiagram.cxx
index 3ac28f0..4ba992e 100644
--- a/vtkVmtk/ComputationalGeometry/vtkvmtkSimplifyVoronoiDiagram.cxx
+++ b/vtkVmtk/ComputationalGeometry/vtkvmtkSimplifyVoronoiDiagram.cxx
@@ -196,7 +196,7 @@ int vtkvmtkSimplifyVoronoiDiagram::RequestData(
   //   }
   poly->SetPolys(currentPolys);
   
-#if (VTK_MAJOR_VERSION >= 9 && VTK_MINOR_VERSION >= 0 && VTK_BUILD_VERSION >= 20221108)
+#if (VTK_MAJOR_VERSION >= 9 && VTK_MINOR_VERSION >= 0)
   currentLinks->SetDataSet(poly);
   currentLinks->BuildLinks();
 #else
@@ -296,7 +296,7 @@ int vtkvmtkSimplifyVoronoiDiagram::RequestData(
     // #pragma message "vtkvmtkSimplifyVoronoiDiagram::RequestData not functional. Must be updated based on Kitware/VTK@88efc809a"
     // vtkErrorMacro(<< "!");
     poly->SetPolys(currentPolys);
-#if (VTK_MAJOR_VERSION >= 9 && VTK_MINOR_VERSION >= 0 && VTK_BUILD_VERSION >= 20221108)
+#if (VTK_MAJOR_VERSION >= 9 && VTK_MINOR_VERSION >= 0)
     currentLinks->SetDataSet(poly);
     currentLinks->BuildLinks();
 #else
diff --git a/vtkVmtk/Contrib/vtkvmtkCellDimensionFilter.cxx b/vtkVmtk/Contrib/vtkvmtkCellDimensionFilter.cxx
index 4e54cf3..8d38c1c 100644
--- a/vtkVmtk/Contrib/vtkvmtkCellDimensionFilter.cxx
+++ b/vtkVmtk/Contrib/vtkvmtkCellDimensionFilter.cxx
@@ -59,17 +59,22 @@ int vtkvmtkCellDimensionFilter::FillInputPortInformation(int, vtkInformation *in
 
 void vtkvmtkCellDimensionFilter::ThresholdByLower(int lower)
 {
-  Threshold->ThresholdByLower(lower);
+  Threshold->SetLowerThreshold(lower);
+  Threshold->SetThresholdFunction(vtkThreshold::THRESHOLD_LOWER);
+  
 }
 
 void vtkvmtkCellDimensionFilter::ThresholdByUpper(int upper)
 {
-  Threshold->ThresholdByUpper(upper);
+  Threshold->SetUpperThreshold(upper);
+  Threshold->SetThresholdFunction(vtkThreshold::THRESHOLD_UPPER);
 }
 
 void vtkvmtkCellDimensionFilter::ThresholdBetween(int lower, int upper)
 {
-  Threshold->ThresholdBetween(lower,upper);
+  Threshold->SetLowerThreshold(lower);
+  Threshold->SetUpperThreshold(upper);
+  Threshold->SetThresholdFunction(vtkThreshold::THRESHOLD_BETWEEN);
 }
 
 int vtkvmtkCellDimensionFilter::GetLowerThreshold()
-- 
2.40.0.windows.1

